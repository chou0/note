ARP协议：地址解析协议

### 作用
==将ip地址转换物理地址==

### 实现原理
1. IP地址和硬件地址没有直接换算关系
2. ARP是通过广播，向局域网内的所有设备询问某个ip地址的设备的硬件地址是什么（广播包带了自己的物理地址），该设备收到后回应，
3. 每个物理设备在本地都会有arp缓存，断电或超时会过期被丢弃 
4. 一般认为ARP协议只使适用于局域网，因为广播会被路由器丢弃


### 例子
1. 如果目的IP和自己在同一个网段：  
1.1 当IP层的ARP高速缓存表中存在目的IP对应的MAC地址时，   
则调用网络接口send函数（参数为IP Packet和目的MAC））将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去；  
1.2 当IP层的ARP高速缓存表中不存在目的IP对应的MAC地址时，    
则IP层将TCP的SYN缓存下来，发送ARP广播请求目的IP的MAC，收到ARP应答之后，将应答之中的<IP地址，对应的MAC>对缓存在本地ARP高速缓存表中，然后完成TCP SYN的IP封装，调用网络接口send函数（参数为IP Packet和目的MAC））将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去；。

2. 如果目的IP地址和自己不在同一个网段，就需要将包发送给默认网关，这需要知道默认网关的MAC地址：  
2.1 当IP层的ARP高速缓存表中存在默认网关对应的MAC地址时，  
则调用网络接口send函数（参数为IP Packet和默认网关的MAC）将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC  
2.2 当IP层的ARP高速缓存表中不存在默认网关对应的MAC地址时，   
则IP层将TCP的SYN缓存下来，发送ARP广播请求默认网关的MAC，收到ARP应答之后，将应答之中的<默认网关地址，对应的MAC>对缓存在本地ARP高速缓存表中，然后完成TCP SYN的IP封装，调用网络接口send函数（参数为IP Packet和默认网关的MAC）将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去。
